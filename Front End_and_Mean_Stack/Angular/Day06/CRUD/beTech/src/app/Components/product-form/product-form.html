<!-- product-form.component.html -->
<app-header></app-header>

<main class="bg-gray-100 min-h-screen py-10">
  <div class="container mx-auto px-4">
    <div class="bg-white rounded-lg shadow-md p-8 max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold text-gray-800 mb-6">
        {{ isEditMode() ? 'Update Product' : 'Create New Product' }}
      </h2>

      @if (error()) {
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
          <p>{{ error() }}</p>
        </div>
      }

      <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <!-- Product Name -->
        <div class="mb-6">
          <label for="name" class="block text-gray-700 font-semibold mb-2"> Product Name * </label>
          <input
            type="text"
            id="name"
            formControlName="name"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="Enter product name"
          />
          @if (hasError('name', 'required')) {
            <p class="text-red-500 text-sm mt-1">Product name is required</p>
          }
          @if (hasError('name', 'minlength')) {
            <p class="text-red-500 text-sm mt-1">Product name must be at least 3 characters</p>
          }
        </div>

        <!-- Product Code -->
        <div class="mb-6">
          <label for="productCode" class="block text-gray-700 font-semibold mb-2">
            Product Code *
          </label>
          <input
            type="text"
            id="productCode"
            formControlName="productCode"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="e.g., SMS-S24U"
          />
          @if (hasError('productCode', 'required')) {
            <p class="text-red-500 text-sm mt-1">Product code is required</p>
          }
        </div>

        <!-- Brand -->
        <div class="mb-6">
          <label for="brand" class="block text-gray-700 font-semibold mb-2"> Brand * </label>
          <input
            type="text"
            id="brand"
            formControlName="brand"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="e.g., Samsung"
          />
          @if (hasError('brand', 'required')) {
            <p class="text-red-500 text-sm mt-1">Brand is required</p>
          }
        </div>

        <!-- Category ID -->
        <div class="mb-6">
          <label for="categoryId" class="block text-gray-700 font-semibold mb-2">
            Category ID *
          </label>
          <input
            type="text"
            id="categoryId"
            formControlName="categoryId"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="e.g., cat-001"
          />
          @if (hasError('categoryId', 'required')) {
            <p class="text-red-500 text-sm mt-1">Category ID is required</p>
          }
        </div>

        <!-- Description -->
        <div class="mb-6">
          <label for="description" class="block text-gray-700 font-semibold mb-2">
            Description *
          </label>
          <textarea
            id="description"
            formControlName="description"
            rows="4"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="Enter product description"
          ></textarea>
          @if (hasError('description', 'required')) {
            <p class="text-red-500 text-sm mt-1">Description is required</p>
          }
        </div>

        <!-- Price and Stock (Row) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <!-- Price -->
          <div>
            <label for="price" class="block text-gray-700 font-semibold mb-2"> Price ($) * </label>
            <input
              type="number"
              id="price"
              formControlName="price"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
              placeholder="0.00"
              step="0.01"
            />
            @if (hasError('price', 'required')) {
              <p class="text-red-500 text-sm mt-1">Price is required</p>
            }
            @if (hasError('price', 'min')) {
              <p class="text-red-500 text-sm mt-1">Price must be positive</p>
            }
          </div>

          <!-- Stock -->
          <div>
            <label for="stock" class="block text-gray-700 font-semibold mb-2"> Stock * </label>
            <input
              type="number"
              id="stock"
              formControlName="stock"
              class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
              placeholder="0"
            />
            @if (hasError('stock', 'required')) {
              <p class="text-red-500 text-sm mt-1">Stock is required</p>
            }
            @if (hasError('stock', 'min')) {
              <p class="text-red-500 text-sm mt-1">Stock cannot be negative</p>
            }
          </div>
        </div>

        <!-- Features -->
        <div class="mb-6">
          <label for="features" class="block text-gray-700 font-semibold mb-2">
            Features (comma-separated)
          </label>
          <input
            type="text"
            id="features"
            formControlName="features"
            class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500"
            placeholder="e.g., 6.8-inch Display, 200MP Camera, 5000mAh Battery"
          />
          <p class="text-gray-500 text-sm mt-1">Separate features with commas</p>
        </div>

        <!-- Is Available -->
        <div class="mb-6">
          <label class="flex items-center">
            <input
              type="checkbox"
              formControlName="isAvailable"
              class="w-5 h-5 text-cyan-600 border-gray-300 rounded focus:ring-cyan-500"
            />
            <span class="ml-2 text-gray-700 font-semibold">Product is available</span>
          </label>
        </div>

        <!-- Buttons -->
        <div class="flex gap-4">
          <button
            type="submit"
            [disabled]="loading()"
            class="flex-1 px-6 py-3 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg font-medium transition-colors duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed"
          >
            {{ loading() ? 'Saving...' : isEditMode() ? 'Update Product' : 'Create Product' }}
          </button>
          <button
            type="button"
            (click)="onCancel()"
            [disabled]="loading()"
            class="flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</main>

<app-footer></app-footer>
